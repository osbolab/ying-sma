<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SMA: Building</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Configure the makefile by invoking <code>cmake</code> in the build directory. Do not invoke <code>cmake</code> in any component's root directory or any other path. </p>
<pre class="fragment"> # -DCMAKE_BUILD_TYPE=Debug - attach symbols to the output (on by default)
 # -Dbuild_tests=OFF        - don't build test executables

 cd core/build/
 cmake ../
 make
 ./libsma_test
</pre><p>Project sources are declared in <code>CMakeLists.txt</code>.</p>
<h2>Testing</h2>
<p>Using gtest: </p>
<pre class="fragment">test/test1.hh
------------------
#pragma once

#include "log.hh"
#include "gtest/gtest.h"

TEST(MyClass, it_does_x_correctly)
{
  LOG(DEBUG) &lt;&lt; "Hello!";
  ASSERT_EQ(1, 1);
  ASSERT_GT(1, 0);
  LOG(FATAL) &lt;&lt; "Something terrible happened";
}

test/test_main.cc
------------------
/**************************************************************************
 * This file just creates a compilation unit with the tests.

#include "log.hh"
// Must come first and only once in application 
_INITIALIZE_EASYLOGGINGPP

#include "test1.hh"
// more tests

#include "gtest/gtest.h"

int main(int argc, char** argv)
{
  // Allow command line arguments to specify tests
  ::testing::InitGoogleTest(&amp;argc, argv);

  // Trim down some noisy output
  // Optionally turn logging off or change debug level (default ALL)
  el::Loggers::reconfigureAllLoggers(
    el::ConfigurationType::Format,
    "%datetime{%m:%s.%g} %levshort [%thread] %func (%fbase:%line) %msg");

  return RUN_ALL_TESTS();
}
</pre><h2>Project Setup</h2>
<h3>Using C++11</h3>
<h4>NS-3 via <code>wscript</code></h4>
<pre class="fragment">def build(bld):
  obj = bld.create_ns3_program('ex', ['csma', 'internet', 'applications'])
  obj.cxxflags = ['-std=c++11']
  obj.source = ['ex.cc']
</pre><p>Compile and run by changing into the <code>ns-3.xx/build</code> directory and running <code>./waf --run example</code></p>
<h4>Android</h4>
<blockquote class="doxtable">
<p>If you're using command line NDK support this is what I had to put in my <code>jni/Application.mk</code> to get C++11 support with API 19</p>
<p></p>
</blockquote>
<p>(<a href="http://stackoverflow.com/a/21386866">stackoverflow</a>) </p>
<pre class="fragment">NDK_TOOLCHAIN_VERSION := 4.8
# APP_STL := stlport_shared  --&gt; does not seem to contain C++11 features
APP_STL := gnustl_shared

# Enable c++11 extentions in source code
APP_CPPFLAGS += -std=c++11
</pre><h2>Protocols</h2>
<h3>Content dissemination</h3>
<ol type="1">
<li>Interest a. Announcement a. Replication</li>
</ol>
<ol type="1">
<li>Content a. Announcement a. Request a. Distribution a. Caching</li>
</ol>
<h4>Interest</h4>
<h5>Announcement</h5>
<p>Some consumer <em>G</em> generates an interest <em>I_T</em> in content type <em>T</em>. She broadcasts this interest to her nearest neighbors, and they in turn broadcast the interest if they have not already.</p>
<p>Each node that sees this interest inspects her <em>active interest table</em> (AIT) for a match on <em>T</em>. The AIT maps <em>T</em> to some future time point.</p>
<p>If she finds an entry in her AIT she increments the mapped time by the interest expiry duration <em>t</em>; if she finds no entry then she adds it with an initial value of <em>t</em>.</p>
<p>Once every node in the network has seen <em>I_T</em> and has an entry in her AIT for <em>T</em><code>-&gt;</code>*t* the interest is <em>saturated</em> and the announcement phase is complete.</p>
<h5>Replication</h5>
<p>When a node arrives to the network he announces his arrival to his nearest neighbors. Each of them responds by broadcasting their interest tables to him until he has a complete table. He uses the mapped time values stored by the other nodes and does not increment them.</p>
<h4>Content</h4>
<p>Some producer <em>P</em> generates a content <em>C_T</em> of type <em>T</em> and computes its hash <em>H</em>. She segments this content into <em>N</em> blocks <em>L</em> bytes long and indexes them from 0 to <em>N</em>-1. She then names each block <em>B_i</em> by concatenating the hash value of the original content with the block's index and hashing that concatenated value. Finally she stores these blocks in her local cache, thus becoming a <em>seed</em> for <em>C_T</em>.</p>
<h5>Announcement</h5>
<p>When the producer <em>P</em> has finished generating the blocks for her content she will notify her immediate neighbors that she has new content with type <em>T</em> and that its name is <em>H</em>, the original content's hash value.</p>
<h5>Request</h5>
<h5>Distribution</h5>
<h5>Caching</h5>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 2 2014 00:48:00 for SMA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
